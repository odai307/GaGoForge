{
  "problem_id": "react-state_management-003",
  "title": "Build a Todo Application with useReducer",
  "slug": "build-todo-application-with-usereducer",
  "framework": "react",
  "category": "state_management",
  "difficulty": "beginner",
  "description": "Create a todo application using the useReducer hook for state management. This application should handle complex state transitions in a predictable way.\n\n**Requirements:**\n1. Create a `TodoApp` component using useReducer\n2. Define todo actions:\n   - ADD_TODO\n   - TOGGLE_TODO\n   - DELETE_TODO\n   - UPDATE_TODO_TEXT\n   - CLEAR_COMPLETED\n3. Todo state structure:\n   - Array of todos\n   - Each todo: { id, text, completed }\n4. Implement features:\n   - Add new todo\n   - Toggle completion\n   - Edit todo text\n   - Delete todo\n   - Filter todos (all/active/completed)\n   - Clear completed todos\n   - Statistics (total/active/completed)\n\n**Implementation Details:**\n- Use useReducer instead of multiple useState calls\n- Create a reducer function that handles all actions\n- Use unique IDs for todos (Date.now() or uuid)\n- Add input validation (non-empty todos)\n- Implement filter functionality\n- Show appropriate statistics\n\n**Expected Behavior:**\n- Adding todo clears input and adds to list\n- Toggling todo updates completion status\n- Editing todo updates text with validation\n- Deleting todo removes from list\n- Filters show appropriate todos\n- Statistics update in real-time\n- Clear completed removes all completed todos\n\n**UI Requirements:**\n- Input field with add button\n- List of todos with checkboxes\n- Edit/Delete buttons for each todo\n- Filter buttons (All/Active/Completed)\n- Statistics display\n- Clear completed button",
  "description_preview": "Create a todo app with complex state management using useReducer hook",
  "context_code": "",
  "starter_code": "import React, { useReducer, useState } from 'react';\n\n// TODO: Define action types\n// const ADD_TODO = 'ADD_TODO';\n// const TOGGLE_TODO = 'TOGGLE_TODO';\n// const DELETE_TODO = 'DELETE_TODO';\n// const UPDATE_TODO_TEXT = 'UPDATE_TODO_TEXT';\n// const CLEAR_COMPLETED = 'CLEAR_COMPLETED';\n// const SET_FILTER = 'SET_FILTER';\n\n// TODO: Define initial state\nconst initialState = {\n  todos: [],\n  filter: 'all' // 'all', 'active', 'completed'\n};\n\n// TODO: Create reducer function\nfunction todoReducer(state, action) {\n  switch (action.type) {\n    // TODO: Handle each action type\n    default:\n      return state;\n  }\n}\n\nexport default function TodoApp() {\n  // TODO: Initialize useReducer\n  // const [state, dispatch] = useReducer(todoReducer, initialState);\n  \n  const [newTodoText, setNewTodoText] = useState('');\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState('');\n  \n  // TODO: Extract todos and filter from state\n  // const { todos, filter } = state;\n  \n  // TODO: Calculate statistics\n  // const totalTodos = todos.length;\n  // const completedTodos = todos.filter(todo => todo.completed).length;\n  // const activeTodos = totalTodos - completedTodos;\n  \n  // TODO: Filter todos based on current filter\n  // const filteredTodos = todos.filter(todo => {\n  //   if (filter === 'active') return !todo.completed;\n  //   if (filter === 'completed') return todo.completed;\n  //   return true;\n  // });\n  \n  // TODO: Implement handler functions\n  // const handleAddTodo = () => { ... };\n  // const handleToggleTodo = (id) => { ... };\n  // const handleDeleteTodo = (id) => { ... };\n  // const handleStartEdit = (id, text) => { ... };\n  // const handleSaveEdit = (id) => { ... };\n  // const handleClearCompleted = () => { ... };\n  // const handleSetFilter = (filterType) => { ... };\n  \n  return (\n    <div style={{ maxWidth: '600px', margin: '0 auto' }}>\n      <h1>Todo App (useReducer)</h1>\n      \n      {/* Add Todo Form */}\n      <div style={{ marginBottom: '20px' }}>\n        <input\n          type=\"text\"\n          value={newTodoText}\n          onChange={(e) => setNewTodoText(e.target.value)}\n          placeholder=\"What needs to be done?\"\n          style={{ marginRight: '10px', padding: '8px' }}\n        />\n        <button onClick={() => {}}>\n          Add Todo\n        </button>\n      </div>\n      \n      {/* Filter Buttons */}\n      <div style={{ marginBottom: '20px' }}>\n        <button onClick={() => {}}>All</button>\n        <button onClick={() => {}}>Active</button>\n        <button onClick={() => {}}>Completed</button>\n      </div>\n      \n      {/* Todo List */}\n      <ul style={{ listStyle: 'none', padding: 0 }}>\n        {/* TODO: Render filtered todos */}\n      </ul>\n      \n      {/* Statistics */}\n      <div style={{ marginTop: '20px', padding: '10px', backgroundColor: '#f5f5f5' }}>\n        {/* TODO: Display statistics */}\n      </div>\n      \n      {/* Clear Completed Button */}\n      <div style={{ marginTop: '10px' }}>\n        <button onClick={() => {}}>\n          Clear Completed\n        </button>\n      </div>\n    </div>\n  );\n}",
  "target_area": "TodoApp component with useReducer for state management",
  "validation_spec": {
    "required_imports": ["react", "react.useReducer", "react.useState"],
    "required_structure": {
      "functions": [
        {
          "name": "TodoApp",
          "type": "functional_component",
          "has_export": true,
          "has_prop_types": false
        },
        {
          "name": "todoReducer",
          "type": "reducer_function",
          "has_export": false,
          "has_prop_types": false
        }
      ]
    },
    "behavior_patterns": [
      {"type": "hook_call", "hook": "useReducer", "min_calls": 1},
      {"type": "state_management", "state_type": "useReducer"},
      {"type": "hook_call", "hook": "useState", "min_calls": 1},
      "reducer function with switch statement",
      "action dispatch patterns",
      "array operations in reducer"
    ]
  },
  "import_weight": 15.00,
  "structure_weight": 40.00,
  "behavior_weight": 45.00,
  "passing_score": 85.00,
  "hints": [
    "Start by defining all action types as constants",
    "Create a reducer function that handles each action type",
    "Remember that reducer should return a new state object, not mutate the existing one",
    "Use dispatch function to send actions to the reducer",
    "Complex state updates are easier with useReducer than multiple useState calls"
  ],
  "learning_resources": [
    "https://react.dev/reference/react/useReducer",
    "https://react.dev/learn/extracting-state-logic-into-a-reducer"
  ],
  "tags": ["react", "state-management", "useReducer", "todo", "beginner"],
  "estimated_time_minutes": 40,
  "patterns": [
    {
      "pattern_id": "react-state_management-003-pattern-1",
      "name": "Todo App with useReducer",
      "description": "Complete todo application using useReducer for complex state management with filtering and statistics",
      "example_code": "import React, { useReducer, useState } from 'react';\n\n// Action Types\nconst ADD_TODO = 'ADD_TODO';\nconst TOGGLE_TODO = 'TOGGLE_TODO';\nconst DELETE_TODO = 'DELETE_TODO';\nconst UPDATE_TODO_TEXT = 'UPDATE_TODO_TEXT';\nconst CLEAR_COMPLETED = 'CLEAR_COMPLETED';\nconst SET_FILTER = 'SET_FILTER';\n\n// Initial State\nconst initialState = {\n  todos: [],\n  filter: 'all' // 'all', 'active', 'completed'\n};\n\n// Reducer Function\nfunction todoReducer(state, action) {\n  switch (action.type) {\n    case ADD_TODO:\n      if (!action.payload.text.trim()) return state;\n      \n      const newTodo = {\n        id: Date.now(),\n        text: action.payload.text,\n        completed: false\n      };\n      \n      return {\n        ...state,\n        todos: [...state.todos, newTodo]\n      };\n    \n    case TOGGLE_TODO:\n      return {\n        ...state,\n        todos: state.todos.map(todo => \n          todo.id === action.payload.id \n            ? { ...todo, completed: !todo.completed }\n            : todo\n        )\n      };\n    \n    case DELETE_TODO:\n      return {\n        ...state,\n        todos: state.todos.filter(todo => todo.id !== action.payload.id)\n      };\n    \n    case UPDATE_TODO_TEXT:\n      if (!action.payload.text.trim()) return state;\n      \n      return {\n        ...state,\n        todos: state.todos.map(todo => \n          todo.id === action.payload.id \n            ? { ...todo, text: action.payload.text }\n            : todo\n        )\n      };\n    \n    case CLEAR_COMPLETED:\n      return {\n        ...state,\n        todos: state.todos.filter(todo => !todo.completed)\n      };\n    \n    case SET_FILTER:\n      return {\n        ...state,\n        filter: action.payload.filter\n      };\n    \n    default:\n      return state;\n  }\n}\n\nexport default function TodoApp() {\n  const [state, dispatch] = useReducer(todoReducer, initialState);\n  const [newTodoText, setNewTodoText] = useState('');\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState('');\n  \n  const { todos, filter } = state;\n  \n  // Calculate statistics\n  const totalTodos = todos.length;\n  const completedTodos = todos.filter(todo => todo.completed).length;\n  const activeTodos = totalTodos - completedTodos;\n  \n  // Filter todos based on current filter\n  const filteredTodos = todos.filter(todo => {\n    if (filter === 'active') return !todo.completed;\n    if (filter === 'completed') return todo.completed;\n    return true;\n  });\n  \n  // Handlers\n  const handleAddTodo = () => {\n    if (!newTodoText.trim()) return;\n    \n    dispatch({\n      type: ADD_TODO,\n      payload: { text: newTodoText }\n    });\n    setNewTodoText('');\n  };\n  \n  const handleToggleTodo = (id) => {\n    dispatch({\n      type: TOGGLE_TODO,\n      payload: { id }\n    });\n  };\n  \n  const handleDeleteTodo = (id) => {\n    dispatch({\n      type: DELETE_TODO,\n      payload: { id }\n    });\n  };\n  \n  const handleStartEdit = (id, text) => {\n    setEditingId(id);\n    setEditText(text);\n  };\n  \n  const handleSaveEdit = (id) => {\n    if (!editText.trim()) {\n      setEditingId(null);\n      return;\n    }\n    \n    dispatch({\n      type: UPDATE_TODO_TEXT,\n      payload: { id, text: editText }\n    });\n    setEditingId(null);\n    setEditText('');\n  };\n  \n  const handleClearCompleted = () => {\n    dispatch({ type: CLEAR_COMPLETED });\n  };\n  \n  const handleSetFilter = (filterType) => {\n    dispatch({\n      type: SET_FILTER,\n      payload: { filter: filterType }\n    });\n  };\n  \n  const handleKeyPress = (e, action) => {\n    if (e.key === 'Enter') {\n      action();\n    }\n  };\n  \n  return (\n    <div style={{ maxWidth: '600px', margin: '0 auto' }}>\n      <h1>Todo App (useReducer)</h1>\n      \n      {/* Add Todo Form */}\n      <div style={{ marginBottom: '20px' }}>\n        <input\n          type=\"text\"\n          value={newTodoText}\n          onChange={(e) => setNewTodoText(e.target.value)}\n          onKeyPress={(e) => handleKeyPress(e, handleAddTodo)}\n          placeholder=\"What needs to be done?\"\n          style={{\n            marginRight: '10px',\n            padding: '10px',\n            width: '70%',\n            fontSize: '16px'\n          }}\n        />\n        <button\n          onClick={handleAddTodo}\n          style={{\n            padding: '10px 20px',\n            fontSize: '16px',\n            backgroundColor: '#007bff',\n            color: 'white',\n            border: 'none',\n            borderRadius: '5px',\n            cursor: 'pointer'\n          }}\n        >\n          Add Todo\n        </button>\n      </div>\n      \n      {/* Filter Buttons */}\n      <div style={{ marginBottom: '20px' }}>\n        <button\n          onClick={() => handleSetFilter('all')}\n          style={{\n            marginRight: '10px',\n            padding: '8px 16px',\n            backgroundColor: filter === 'all' ? '#333' : '#ddd',\n            color: filter === 'all' ? 'white' : '#333',\n            border: 'none',\n            borderRadius: '5px',\n            cursor: 'pointer'\n          }}\n        >\n          All ({totalTodos})\n        </button>\n        <button\n          onClick={() => handleSetFilter('active')}\n          style={{\n            marginRight: '10px',\n            padding: '8px 16px',\n            backgroundColor: filter === 'active' ? '#333' : '#ddd',\n            color: filter === 'active' ? 'white' : '#333',\n            border: 'none',\n            borderRadius: '5px',\n            cursor: 'pointer'\n          }}\n        >\n          Active ({activeTodos})\n        </button>\n        <button\n          onClick={() => handleSetFilter('completed')}\n          style={{\n            padding: '8px 16px',\n            backgroundColor: filter === 'completed' ? '#333' : '#ddd',\n            color: filter === 'completed' ? 'white' : '#333',\n            border: 'none',\n            borderRadius: '5px',\n            cursor: 'pointer'\n          }}\n        >\n          Completed ({completedTodos})\n        </button>\n      </div>\n      \n      {/* Todo List */}\n      {filteredTodos.length === 0 ? (\n        <p style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\n          {filter === 'all' && 'No todos yet. Add one above!'}\n          {filter === 'active' && 'No active todos. Good job!'}\n          {filter === 'completed' && 'No completed todos yet.'}\n        </p>\n      ) : (\n        <ul style={{ listStyle: 'none', padding: 0 }}>\n          {filteredTodos.map(todo => (\n            <li \n              key={todo.id}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                padding: '15px',\n                marginBottom: '10px',\n                backgroundColor: '#f9f9f9',\n                borderRadius: '8px',\n                border: '1px solid #eee'\n              }}\n            >\n              {/* Checkbox */}\n              <input\n                type=\"checkbox\"\n                checked={todo.completed}\n                onChange={() => handleToggleTodo(todo.id)}\n                style={{ marginRight: '15px' }}\n              />\n              \n              {/* Todo Text or Edit Input */}\n              <div style={{ flex: 1 }}>\n                {editingId === todo.id ? (\n                  <input\n                    type=\"text\"\n                    value={editText}\n                    onChange={(e) => setEditText(e.target.value)}\n                    onKeyPress={(e) => handleKeyPress(e, () => handleSaveEdit(todo.id))}\n                    autoFocus\n                    style={{\n                      width: '100%',\n                      padding: '8px',\n                      fontSize: '16px'\n                    }}\n                  />\n                ) : (\n                  <span style={{\n                    textDecoration: todo.completed ? 'line-through' : 'none',\n                    color: todo.completed ? '#666' : '#333',\n                    fontSize: '18px'\n                  }}>\n                    {todo.text}\n                  </span>\n                )}\n              </div>\n              \n              {/* Action Buttons */}\n              <div>\n                {editingId === todo.id ? (\n                  <button\n                    onClick={() => handleSaveEdit(todo.id)}\n                    style={{\n                      marginLeft: '10px',\n                      padding: '5px 10px',\n                      backgroundColor: '#28a745',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '5px',\n                      cursor: 'pointer'\n                    }}\n                  >\n                    Save\n                  </button>\n                ) : (\n                  <button\n                    onClick={() => handleStartEdit(todo.id, todo.text)}\n                    style={{\n                      marginLeft: '10px',\n                      padding: '5px 10px',\n                      backgroundColor: '#ffc107',\n                      color: '#333',\n                      border: 'none',\n                      borderRadius: '5px',\n                      cursor: 'pointer'\n                    }}\n                  >\n                    Edit\n                  </button>\n                )}\n                \n                <button\n                  onClick={() => handleDeleteTodo(todo.id)}\n                  style={{\n                    marginLeft: '10px',\n                    padding: '5px 10px',\n                    backgroundColor: '#dc3545',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '5px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Delete\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n      \n      {/* Statistics */}\n      <div style={{\n        marginTop: '20px',\n        padding: '15px',\n        backgroundColor: '#f5f5f5',\n        borderRadius: '8px',\n        textAlign: 'center'\n      }}>\n        <h3>Statistics</h3>\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\n          <div>\n            <strong>Total:</strong> {totalTodos}\n          </div>\n          <div>\n            <strong>Active:</strong> {activeTodos}\n          </div>\n          <div>\n            <strong>Completed:</strong> {completedTodos}\n          </div>\n        </div>\n      </div>\n      \n      {/* Clear Completed Button */}\n      {completedTodos > 0 && (\n        <div style={{ marginTop: '20px', textAlign: 'center' }}>\n          <button\n            onClick={handleClearCompleted}\n            style={{\n              padding: '10px 20px',\n              fontSize: '16px',\n              backgroundColor: '#6c757d',\n              color: 'white',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer'\n            }}\n          >\n            Clear Completed ({completedTodos})\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}",
      "required_imports": ["react", "react.useReducer", "react.useState"],
      "required_structure": {
        "functions": [
          {
            "name": "TodoApp",
            "type": "functional_component",
            "has_export": true
          },
          {
            "name": "todoReducer",
            "type": "reducer_function"
          }
        ]
      },
      "forbidden_patterns": ["multiple useState for related state", "direct state mutation", "setState in loops"],
      "is_primary": true,
      "confidence_threshold": 85.00
    }
  ]
}