{
  "problem_id": "react-forms-002",
  "title": "Build a Multi-Step Registration Form",
  "slug": "build-multi-step-registration-form",
  "framework": "react",
  "category": "forms",
  "difficulty": "beginner",
  "description": "Create a multi-step registration form that guides users through the registration process with progress tracking and step validation.\n\n**Requirements:**\n1. Create a `MultiStepRegistration` component with 3 steps:\n   - Step 1: Personal Information (name, email, date of birth)\n   - Step 2: Account Details (username, password, confirm password)\n   - Step 3: Preferences (newsletter, terms acceptance)\n2. Implement step navigation with Next/Previous buttons\n3. Validate each step before allowing progression\n4. Show progress indicator (step tracker)\n5. Display summary on final step before submission\n\n**Step Details:**\n**Step 1 - Personal Information:**\n- Full Name (required, min 2 words)\n- Email (required, valid format)\n- Date of Birth (required, must be 18+ years)\n\n**Step 2 - Account Details:**\n- Username (required, min 3 chars, alphanumeric)\n- Password (required, min 8 chars, must include number)\n- Confirm Password (must match password)\n\n**Step 3 - Preferences:**\n- Newsletter subscription (checkbox)\n- Accept Terms & Conditions (required checkbox)\n\n**Form Features:**\n- Step validation (cannot proceed with errors)\n- Progress indicator showing current step\n- Next/Previous navigation\n- Save form data between steps\n- Final review before submission\n- Success confirmation\n\n**UI Requirements:**\n- Clear step indicator (1/3, 2/3, 3/3)\n- Disabled Next button when step invalid\n- Show current step title\n- Show validation errors per step\n- Clean, modern interface\n- Responsive design\n\n**Example Flow:**\n1. User fills Personal Information → clicks Next\n2. User fills Account Details → clicks Next\n3. User sets Preferences → clicks Submit\n4. Show success message",
  "description_preview": "Create a multi-step registration form with step validation, progress tracking, and data persistence",
  "context_code": "// Step titles and descriptions (for reference)\nconst STEPS = [\n  { id: 1, title: 'Personal Info', description: 'Tell us about yourself' },\n  { id: 2, title: 'Account Details', description: 'Create your account' },\n  { id: 3, title: 'Preferences', description: 'Set your preferences' }\n];\n\n// Date validation helper (for reference)\nfunction calculateAge(birthDate) {\n  const today = new Date();\n  const birth = new Date(birthDate);\n  let age = today.getFullYear() - birth.getFullYear();\n  const monthDiff = today.getMonth() - birth.getMonth();\n  \n  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\n    age--;\n  }\n  \n  return age;\n}",
  "starter_code": "",
  "target_area": "MultiStepRegistration component with step management, validation, and navigation",
  "validation_spec": {
    "required_imports": ["react", "react.useState"],
    "required_structure": {
      "functions": [{
        "name": "MultiStepRegistration",
        "type": "functional_component",
        "has_export": true,
        "has_prop_types": false
      }]
    },
    "behavior_patterns": [
      {"type": "form_handling", "form_type": "controlled"},
      "step-based state management",
      "conditional rendering based on current step",
      "form validation per step",
      "navigation between steps",
      "form data persistence across steps"
    ]
  },
  "import_weight": 10.00,
  "structure_weight": 40.00,
  "behavior_weight": 50.00,
  "passing_score": 85.00,
  "hints": [
    "Use useState to track current step (1, 2, 3) and form data for all steps",
    "Create separate validation functions for each step",
    "Store all form data in a single state object that persists between steps",
    "Only allow Next button when current step is valid",
    "On the final step, show a summary of all entered data before submission"
  ],
  "learning_resources": [
    "https://react.dev/learn/conditional-rendering",
    "https://react.dev/learn/sharing-state-between-components"
  ],
  "tags": ["react", "forms", "multi-step", "wizard", "validation", "beginner"],
  "estimated_time_minutes": 40,
  "patterns": [
    {
      "pattern_id": "react-forms-002-pattern-1",
      "name": "Multi-Step Registration Form",
      "description": "Complete multi-step registration form with step validation, progress tracking, and data persistence",
      "example_code": "import React, { useState } from 'react';\n\nconst STEPS = [\n  { id: 1, title: 'Personal Information', description: 'Tell us about yourself' },\n  { id: 2, title: 'Account Details', description: 'Create your account credentials' },\n  { id: 3, title: 'Preferences', description: 'Set your preferences and agree to terms' }\n];\n\nfunction validateEmail(email) {\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return re.test(email);\n}\n\nfunction calculateAge(birthDate) {\n  const today = new Date();\n  const birth = new Date(birthDate);\n  let age = today.getFullYear() - birth.getFullYear();\n  const monthDiff = today.getMonth() - birth.getMonth();\n  \n  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\n    age--;\n  }\n  \n  return age;\n}\n\nexport default function MultiStepRegistration() {\n  // Current step state\n  const [currentStep, setCurrentStep] = useState(1);\n  \n  // Form data state\n  const [formData, setFormData] = useState({\n    // Step 1\n    fullName: '',\n    email: '',\n    dateOfBirth: '',\n    \n    // Step 2\n    username: '',\n    password: '',\n    confirmPassword: '',\n    \n    // Step 3\n    newsletter: false,\n    acceptTerms: false\n  });\n  \n  // Step errors state\n  const [errors, setErrors] = useState({\n    step1: {},\n    step2: {},\n    step3: {}\n  });\n  \n  // Submission state\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  \n  // Handle input changes\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  \n  // Validate Step 1\n  const validateStep1 = () => {\n    const newErrors = {};\n    \n    // Full Name validation\n    if (!formData.fullName.trim()) {\n      newErrors.fullName = 'Full name is required';\n    } else if (formData.fullName.trim().split(' ').length < 2) {\n      newErrors.fullName = 'Please enter your full name (first and last)';\n    }\n    \n    // Email validation\n    if (!formData.email.trim()) {\n      newErrors.email = 'Email is required';\n    } else if (!validateEmail(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n    \n    // Date of Birth validation\n    if (!formData.dateOfBirth) {\n      newErrors.dateOfBirth = 'Date of birth is required';\n    } else {\n      const age = calculateAge(formData.dateOfBirth);\n      if (age < 18) {\n        newErrors.dateOfBirth = 'You must be at least 18 years old';\n      }\n    }\n    \n    setErrors(prev => ({ ...prev, step1: newErrors }));\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  // Validate Step 2\n  const validateStep2 = () => {\n    const newErrors = {};\n    \n    // Username validation\n    if (!formData.username.trim()) {\n      newErrors.username = 'Username is required';\n    } else if (formData.username.length < 3) {\n      newErrors.username = 'Username must be at least 3 characters';\n    } else if (!/^[a-zA-Z0-9]+$/.test(formData.username)) {\n      newErrors.username = 'Username can only contain letters and numbers';\n    }\n    \n    // Password validation\n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    } else if (formData.password.length < 8) {\n      newErrors.password = 'Password must be at least 8 characters';\n    } else if (!/\\d/.test(formData.password)) {\n      newErrors.password = 'Password must contain at least one number';\n    }\n    \n    // Confirm Password validation\n    if (!formData.confirmPassword) {\n      newErrors.confirmPassword = 'Please confirm your password';\n    } else if (formData.password !== formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match';\n    }\n    \n    setErrors(prev => ({ ...prev, step2: newErrors }));\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  // Validate Step 3\n  const validateStep3 = () => {\n    const newErrors = {};\n    \n    // Terms acceptance validation\n    if (!formData.acceptTerms) {\n      newErrors.acceptTerms = 'You must accept the terms and conditions';\n    }\n    \n    setErrors(prev => ({ ...prev, step3: newErrors }));\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  // Navigate to next step\n  const handleNext = () => {\n    let isValid = false;\n    \n    // Validate current step\n    switch (currentStep) {\n      case 1:\n        isValid = validateStep1();\n        break;\n      case 2:\n        isValid = validateStep2();\n        break;\n      case 3:\n        isValid = validateStep3();\n        break;\n    }\n    \n    if (isValid && currentStep < 3) {\n      setCurrentStep(prev => prev + 1);\n    }\n  };\n  \n  // Navigate to previous step\n  const handlePrevious = () => {\n    if (currentStep > 1) {\n      setCurrentStep(prev => prev - 1);\n    }\n  };\n  \n  // Handle form submission\n  const handleSubmit = async () => {\n    if (validateStep3()) {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      console.log('Registration data:', formData);\n      setIsSubmitted(true);\n    }\n  };\n  \n  // Render Step 1\n  const renderStep1 = () => (\n    <div>\n      <h2>Personal Information</h2>\n      <p>Tell us about yourself</p>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"fullName\" style={{ display: 'block', marginBottom: '5px', fontWeight: '500' }}>\n          Full Name *\n        </label>\n        <input\n          type=\"text\"\n          id=\"fullName\"\n          name=\"fullName\"\n          value={formData.fullName}\n          onChange={handleChange}\n          placeholder=\"Enter your full name\"\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: `1px solid ${errors.step1.fullName ? '#dc3545' : '#ddd'}`,\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n        />\n        {errors.step1.fullName && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step1.fullName}\n          </div>\n        )}\n      </div>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"email\" style={{ display: 'block', marginBottom: '5px', fontWeight: '500' }}>\n          Email Address *\n        </label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          placeholder=\"Enter your email\"\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: `1px solid ${errors.step1.email ? '#dc3545' : '#ddd'}`,\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n        />\n        {errors.step1.email && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step1.email}\n          </div>\n        )}\n      </div>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"dateOfBirth\" style={{ display: 'block', marginBottom: '5px', fontWeight: '500' }}>\n          Date of Birth *\n        </label>\n        <input\n          type=\"date\"\n          id=\"dateOfBirth\"\n          name=\"dateOfBirth\"\n          value={formData.dateOfBirth}\n          onChange={handleChange}\n          max={new Date().toISOString().split('T')[0]}\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: `1px solid ${errors.step1.dateOfBirth ? '#dc3545' : '#ddd'}`,\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n        />\n        {errors.step1.dateOfBirth && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step1.dateOfBirth}\n          </div>\n        )}\n        {formData.dateOfBirth && (\n          <div style={{ fontSize: '14px', color: '#666', marginTop: '5px' }}>\n            Age: {calculateAge(formData.dateOfBirth)} years\n          </div>\n        )}\n      </div>\n    </div>\n  );\n  \n  // Render Step 2\n  const renderStep2 = () => (\n    <div>\n      <h2>Account Details</h2>\n      <p>Create your account credentials</p>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"username\" style={{ display: 'block', marginBottom: '5px', fontWeight: '500' }}>\n          Username *\n        </label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          name=\"username\"\n          value={formData.username}\n          onChange={handleChange}\n          placeholder=\"Choose a username\"\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: `1px solid ${errors.step2.username ? '#dc3545' : '#ddd'}`,\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n        />\n        {errors.step2.username && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step2.username}\n          </div>\n        )}\n      </div>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"password\" style={{ display: 'block', marginBottom: '5px', fontWeight: '500' }}>\n          Password *\n        </label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          name=\"password\"\n          value={formData.password}\n          onChange={handleChange}\n          placeholder=\"Create a password\"\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: `1px solid ${errors.step2.password ? '#dc3545' : '#ddd'}`,\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n        />\n        {errors.step2.password && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step2.password}\n          </div>\n        )}\n        <div style={{ fontSize: '14px', color: '#666', marginTop: '5px' }}>\n          Must be at least 8 characters with a number\n        </div>\n      </div>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"confirmPassword\" style={{ display: 'block', marginBottom: '5px', fontWeight: '500' }}>\n          Confirm Password *\n        </label>\n        <input\n          type=\"password\"\n          id=\"confirmPassword\"\n          name=\"confirmPassword\"\n          value={formData.confirmPassword}\n          onChange={handleChange}\n          placeholder=\"Confirm your password\"\n          style={{\n            width: '100%',\n            padding: '10px',\n            border: `1px solid ${errors.step2.confirmPassword ? '#dc3545' : '#ddd'}`,\n            borderRadius: '5px',\n            fontSize: '16px'\n          }}\n        />\n        {errors.step2.confirmPassword && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step2.confirmPassword}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n  \n  // Render Step 3\n  const renderStep3 = () => (\n    <div>\n      <h2>Preferences</h2>\n      <p>Set your preferences and agree to terms</p>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            name=\"newsletter\"\n            checked={formData.newsletter}\n            onChange={handleChange}\n            style={{ marginRight: '10px', width: '18px', height: '18px' }}\n          />\n          <span>Subscribe to our newsletter for updates and promotions</span>\n        </label>\n      </div>\n      \n      <div style={{ marginBottom: '20px' }}>\n        <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            name=\"acceptTerms\"\n            checked={formData.acceptTerms}\n            onChange={handleChange}\n            style={{ marginRight: '10px', width: '18px', height: '18px' }}\n          />\n          <span>\n            I accept the <a href=\"#\" style={{ color: '#007bff' }}>Terms and Conditions</a> *\n          </span>\n        </label>\n        {errors.step3.acceptTerms && (\n          <div style={{ color: '#dc3545', fontSize: '14px', marginTop: '5px' }}>\n            {errors.step3.acceptTerms}\n          </div>\n        )}\n      </div>\n      \n      {/* Review Section */}\n      <div style={{\n        marginTop: '30px',\n        padding: '20px',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '8px'\n      }}>\n        <h3>Review Your Information</h3>\n        <div style={{ lineHeight: '1.8' }}>\n          <p><strong>Name:</strong> {formData.fullName || 'Not provided'}</p>\n          <p><strong>Email:</strong> {formData.email || 'Not provided'}</p>\n          <p><strong>Date of Birth:</strong> {formData.dateOfBirth || 'Not provided'}</p>\n          <p><strong>Username:</strong> {formData.username || 'Not provided'}</p>\n          <p><strong>Newsletter:</strong> {formData.newsletter ? 'Subscribed' : 'Not subscribed'}</p>\n        </div>\n      </div>\n    </div>\n  );\n  \n  // Success screen\n  const renderSuccess = () => (\n    <div style={{ textAlign: 'center', padding: '40px 20px' }}>\n      <div style={{\n        width: '80px',\n        height: '80px',\n        backgroundColor: '#28a745',\n        borderRadius: '50%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        margin: '0 auto 20px',\n        fontSize: '40px',\n        color: 'white'\n      }}>\n        ✓\n      </div>\n      <h2>Registration Successful!</h2>\n      <p>Thank you for registering, {formData.fullName}!</p>\n      <p>Your account has been created successfully.</p>\n      <p>Check your email at {formData.email} for confirmation.</p>\n    </div>\n  );\n  \n  if (isSubmitted) {\n    return renderSuccess();\n  }\n  \n  return (\n    <div style={{ maxWidth: '600px', margin: '0 auto' }}>\n      <h1>Create Account</h1>\n      \n      {/* Progress Indicator */}\n      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '40px' }}>\n        {STEPS.map((step, index) => (\n          <div key={step.id} style={{ textAlign: 'center', flex: 1, position: 'relative' }}>\n            {/* Connection line */}\n            {index < STEPS.length - 1 && (\n              <div style={{\n                position: 'absolute',\n                top: '15px',\n                left: 'calc(50% + 20px)',\n                right: '-20px',\n                height: '2px',\n                backgroundColor: currentStep > step.id ? '#007bff' : '#ddd',\n                zIndex: 1\n              }} />\n            )}\n            \n            {/* Step circle */}\n            <div style={{\n              width: '30px',\n              height: '30px',\n              borderRadius: '50%',\n              backgroundColor: currentStep > step.id ? '#007bff' : currentStep === step.id ? '#007bff' : '#ddd',\n              color: currentStep >= step.id ? 'white' : '#666',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              margin: '0 auto 10px',\n              fontWeight: 'bold',\n              position: 'relative',\n              zIndex: 2\n            }}>\n              {step.id}\n            </div>\n            \n            {/* Step label */}\n            <div style={{\n              fontSize: '14px',\n              color: currentStep >= step.id ? '#007bff' : '#666',\n              fontWeight: currentStep === step.id ? '600' : '400'\n            }}>\n              {step.title}\n            </div>\n          </div>\n        ))}\n      </div>\n      \n      {/* Current Step Content */}\n      <div style={{ marginBottom: '40px' }}>\n        {currentStep === 1 && renderStep1()}\n        {currentStep === 2 && renderStep2()}\n        {currentStep === 3 && renderStep3()}\n      </div>\n      \n      {/* Navigation Buttons */}\n      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n        <div>\n          {currentStep > 1 && (\n            <button\n              onClick={handlePrevious}\n              style={{\n                padding: '12px 24px',\n                backgroundColor: '#6c757d',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                fontSize: '16px',\n                cursor: 'pointer'\n              }}\n            >\n              Previous\n            </button>\n          )}\n        </div>\n        \n        <div>\n          {currentStep < 3 ? (\n            <button\n              onClick={handleNext}\n              style={{\n                padding: '12px 24px',\n                backgroundColor: '#007bff',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                fontSize: '16px',\n                cursor: 'pointer'\n              }}\n            >\n              Next\n            </button>\n          ) : (\n            <button\n              onClick={handleSubmit}\n              style={{\n                padding: '12px 24px',\n                backgroundColor: '#28a745',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                fontSize: '16px',\n                cursor: 'pointer'\n              }}\n            >\n              Complete Registration\n            </button>\n          )}\n        </div>\n      </div>\n      \n      <div style={{\n        marginTop: '20px',\n        textAlign: 'center',\n        fontSize: '14px',\n        color: '#666'\n      }}>\n        Step {currentStep} of {STEPS.length}\n      </div>\n    </div>\n  );\n}",
      "required_imports": ["react", "react.useState"],
      "required_structure": {
        "functions": [{
          "name": "MultiStepRegistration",
          "type": "functional_component",
          "has_export": true
        }]
      },
      "forbidden_patterns": ["router for steps", "separate components per step", "no validation between steps"],
      "is_primary": true,
      "confidence_threshold": 85.00
    }
  ]
}